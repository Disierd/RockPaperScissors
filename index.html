<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Rock Paper Scissors</title>
  </head>

  <body>
    <div>
      <h1 style="title">Welcome to</h1><br>
      <h2 style="rock title">ROCK, </h2><h2 style="paper title">PAPER, </h2><h2 style="scissors title">SCISSORS</h2>
    </div>
    <div class="grid-container">
      <div class="grid-item">
        <img src="" class="option">
        <button>ROCK</button>
      </div>
      <div class="grid-item">
        <img src="" class="option">
        <button>PAPER</button>
      </div>
      <div class="grid-item">
        <img src="" class="option">
        <button>SCISSORS</button>
      </div>
    </div>
    <div>
      <h3>CHOOSE YOUR OPTION TO START THE GAME</h3>
    </div>
    <div class="grid-container">

    </div>

  </body>
  <script>

    window.onload = game();

    function game() { // Main game function that calls all other functions

      let runGame = true; 
      let userChoice;
      let compChoice;
      let roundResult;
      let score;

      while(runGame === true){ // Loops if the user wants to rematch at the end of a game

        score = 0;

        for (let round = 0; round < 5; round++) { 

          userChoice = getUserChoice(); 

          compChoice = getCompChoice(); 

          roundResult = checkResult(userChoice, compChoice); // Function to check result. Arguments are the returned values from userChoice and compChoice. Returns either a -1, 0 or 1 for loss, draw and win.

          score += roundResult; 

          printRoundResult(roundResult, score, compChoice); 
        }

        printFinalResult(score); 

        runGame = askForRematch(); // Function to ask for a rematch. Returns a boolean that acts as a switch to continue or stop the above while loop.

      }


    }


    function getUserChoice() {
      let userChoice;

      while(userChoice !== "ROCK" && userChoice !== "PAPER" && userChoice !== "SCISSORS"){ // Tests to check validity of user input and re-prompts if invalid
        userChoice = prompt("Rock, Paper or Scissors?"); 
        userChoice = userChoice.toUpperCase(); 
      }

      switch(userChoice) { // Returns number representing user choice to make result checking easier (see checkResult function)
        case "ROCK":
          console.log("You selected ROCK!");
          return 0;
        case "PAPER":
          console.log("You selected PAPER!");
          return 1;
        case "SCISSORS":
          console.log("You selected SCISSORS!"); 
          return 2;
        default:
          console.log("Invalid input, please re-enter choice matching an option.");
        }

    }


    function getCompChoice() {
      return Math.floor(Math.random() * 3); // Assigns a random number between 0 (inclusive) and 2 (inclusive) each of which count for one possible selection
    }


    function checkResult(userSelection, compSelection) {

      let result = compSelection - userSelection; // Prepares variable to test for result

      if (result === 0) { // Checks for draw
        return 0;
      } else if (result === -1 || result === 2) { // Checks for user win.
        return 1;
      } else { // Only other option is user lost
        return -1;
  }

}


    function printRoundResult(roundOutcome, currentScore, compSelection) { // Function to print round result with custom text

      let outcomeString = (roundOutcome === 1) ? `won this round, a point has been added to your score`:(roundOutcome === 0) ? `drew this round, your score remains the same`:`lost this round, a point has been deducted from your score`;
      let compString = (compSelection === 0) ? `rock`:(compSelection === 1) ? `paper`:`scissors`; // Reformats computer choice to string for printing

      console.log(`The computer selected ${ compString }. You ${ outcomeString }! The current score is ${ currentScore }`); //Prints round roundResult with variables inserted
    }


    function printFinalResult(finalScore) { // Function to print final score

      if (finalScore > 0){ // Checks if number is positive, if so user has won
        console.log(`Congratulations, you won! You managed to beat the computer with a final score of ${ finalScore }.`);
      } 
      else if (finalScore === 0) {
        console.log(`You and the computer came to a draw. Your final score is ${ finalScore }.`);
      }
      else { // Otherwise user has lost
        console.log(`Oh no! You lost! Your final score was ${ finalScore }.`);
      }
      
    }


    function askForRematch() { // Function runs after printing final score. Asks for rematch

      let rematch;

      while(rematch !== "Y" && rematch !== "N") { // Checks for player input and loops/re-prompts if invalid
        rematch = prompt("Do you want to play another game? Y/N");
        rematch = rematch.toUpperCase();
      }

      if (rematch === "Y") { // Returns true if player wants to replay. False if not.
        return true;
      }
      else {
        return false;
      }
        
    }

  </script>

</html>